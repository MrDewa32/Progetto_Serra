<!DOCTYPE html>
<html lang="it">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="styles.css" rel="stylesheet">
    <title>Dashboard Serra</title>
</head>

<body data-bs-spy="scroll" data-bs-target="#navbar-example2" data-bs-offset="0" tabindex="0">
    <!-- navbar -->
    <nav id="navbar-example2" class="navbar px-3 mb-3 fixed-top">
        <a class="navbar-brand" href="#"><i class="fas fa-leaf me-2"></i>Serra</a>
        <ul class="nav nav-pills">
            <li class="nav-item">
                <a class="nav-link" href="#temperatura"><i class="fas fa-temperature-high me-1"></i>Temperatura</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="#umidita"><i class="fas fa-tint me-1"></i>Umidità</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="#acqua"><i class="fas fa-water me-1"></i>Livello Acqua</a>
            </li>
            <li class="nav-item ms-2">
                <a class="nav-link" href="login.html"><i class="fas fa-sign-out-alt me-1"></i>Logout</a>
            </li>
        </ul>
    </nav>
    
    <div class="container">
        <h1 class="dashboard-title"><i class="fas fa-chart-line me-2"></i>Dashboard Monitoraggio Serra</h1>
        
        <!-- Sezione Temperatura -->
        <section id="temperatura" class="mb-5">
            <h2 class="section-title"><i class="fas fa-temperature-high me-2"></i>Temperatura Ambiente</h2>
            <div id="temperaturaCarousel" class="carousel slide" data-bs-ride="carousel" data-bs-interval="10000">
                <div class="carousel-indicators">
                    <button type="button" data-bs-target="#temperaturaCarousel" data-bs-slide-to="0" class="active"></button>
                    <button type="button" data-bs-target="#temperaturaCarousel" data-bs-slide-to="1"></button>
                    <button type="button" data-bs-target="#temperaturaCarousel" data-bs-slide-to="2"></button>
                </div>

                <div class="carousel-inner">
                    <div class="carousel-item active">
                        <h3 class="panel-title">Temperatura Giornaliera</h3>
                        <iframe
                            src="http://localhost:3000/d-solo/1c1f173d-3be8-44f2-9260-d415bb383ba0/temperatura-ambiente?orgId=1&from=1704063600000&to=1704668400000&timezone=browser&panelId=1&__feature.dashboardSceneSolo"
                            class="grafana-panel"
                            title="Grafico Temperatura Giornaliera">
                        </iframe>
                    </div>
                    <div class="carousel-item">
                        <h3 class="panel-title">Temperatura Settimanale</h3>
                        <iframe
                            src="http://localhost:3000/d-solo/1c1f173d-3be8-44f2-9260-d415bb383ba0/temperatura-ambiente?orgId=1&from=1704063600000&to=1704668400000&timezone=browser&panelId=2&__feature.dashboardSceneSolo"
                            class="grafana-panel"
                            title="Grafico Temperatura Settimanale">
                        </iframe>
                    </div>
                    <div class="carousel-item">
                        <h3 class="panel-title">Temperatura Mensile</h3>
                        <iframe
                            src="http://localhost:3000/d-solo/1c1f173d-3be8-44f2-9260-d415bb383ba0/temperatura-ambiente?orgId=1&from=1704063600000&to=1704668400000&timezone=browser&panelId=3&__feature.dashboardSceneSolo"
                            class="grafana-panel"
                            title="Grafico Temperatura Mensile">
                        </iframe>
                    </div>
                </div>

                <button class="carousel-control-prev" type="button" data-bs-target="#temperaturaCarousel" data-bs-slide="prev">
                    <span class="carousel-control-prev-icon"></span>
                    <span class="visually-hidden">Precedente</span>
                </button>
                <button class="carousel-control-next" type="button" data-bs-target="#temperaturaCarousel" data-bs-slide="next">
                    <span class="carousel-control-next-icon"></span>
                    <span class="visually-hidden">Successivo</span>
                </button>
            </div>
        </section>

        <!-- Sezione Umidità -->
        <section id="umidita" class="mb-5">
            <h2 class="section-title"><i class="fas fa-tint me-2"></i>Umidità del Terreno</h2>
            <div id="umiditaCarousel" class="carousel slide" data-bs-ride="carousel" data-bs-interval="10000">
                <div class="carousel-indicators">
                    <button type="button" data-bs-target="#umiditaCarousel" data-bs-slide-to="0" class="active"></button>
                    <button type="button" data-bs-target="#umiditaCarousel" data-bs-slide-to="1"></button>
                    <button type="button" data-bs-target="#umiditaCarousel" data-bs-slide-to="2"></button>
                </div>

                <div class="carousel-inner">
                    <div class="carousel-item active">
                        <h3 class="panel-title">Umidità Giornaliera</h3>
                        <iframe
                            src="http://localhost:3000/d-solo/1c1f173d-3be8-44f2-9260-d415bb383ba0/umidita-terreno?orgId=1&from=1704063600000&to=1704668400000&timezone=browser&panelId=1&__feature.dashboardSceneSolo"
                            class="grafana-panel"
                            title="Grafico Umidità Giornaliera">
                        </iframe>
                    </div>
                    <div class="carousel-item">
                        <h3 class="panel-title">Umidità Settimanale</h3>
                        <iframe
                            src="http://localhost:3000/d-solo/1c1f173d-3be8-44f2-9260-d415bb383ba0/umidita-terreno?orgId=1&from=1704063600000&to=1704668400000&timezone=browser&panelId=2&__feature.dashboardSceneSolo"
                            class="grafana-panel"
                            title="Grafico Umidità Settimanale">
                        </iframe>
                    </div>
                    <div class="carousel-item">
                        <h3 class="panel-title">Umidità Mensile</h3>
                        <iframe
                            src="http://localhost:3000/d-solo/1c1f173d-3be8-44f2-9260-d415bb383ba0/umidita-terreno?orgId=1&from=1704063600000&to=1704668400000&timezone=browser&panelId=3&__feature.dashboardSceneSolo"
                            class="grafana-panel"
                            title="Grafico Umidità Mensile">
                        </iframe>
                    </div>
                </div>

                <button class="carousel-control-prev" type="button" data-bs-target="#umiditaCarousel" data-bs-slide="prev">
                    <span class="carousel-control-prev-icon"></span>
                    <span class="visually-hidden">Precedente</span>
                </button>
                <button class="carousel-control-next" type="button" data-bs-target="#umiditaCarousel" data-bs-slide="next">
                    <span class="carousel-control-next-icon"></span>
                    <span class="visually-hidden">Successivo</span>
                </button>
            </div>
        </section>

        <!-- Sezione Livello Acqua -->
        <section id="acqua" class="mb-5">
            <h2 class="section-title"><i class="fas fa-water me-2"></i>Livello Acqua Serbatoio</h2>
            
            <!-- Controlli Pompa -->
            <div class="pump-controls mb-4">
                <div class="card">
                    <div class="card-body">
                        <h3 class="card-title mb-3"><i class="fas fa-pump me-2"></i>Controllo Pompa</h3>
                        <div class="d-flex align-items-center justify-content-between">
                            <div class="pump-status">
                                <span class="status-indicator"></span>
                                <span class="status-text ms-2">Stato: </span>
                                <span class="status-value">Spenta</span>
                            </div>
                            <div class="pump-buttons">
                                <button class="btn btn-success me-2" id="startPump">
                                    <i class="fas fa-play me-1"></i>Avvia
                                </button>
                                <button class="btn btn-danger" id="stopPump">
                                    <i class="fas fa-stop me-1"></i>Ferma
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="acquaCarousel" class="carousel slide" data-bs-ride="carousel" data-bs-interval="10000">
                <div class="carousel-indicators">
                    <button type="button" data-bs-target="#acquaCarousel" data-bs-slide-to="0" class="active"></button>
                    <button type="button" data-bs-target="#acquaCarousel" data-bs-slide-to="1"></button>
                    <button type="button" data-bs-target="#acquaCarousel" data-bs-slide-to="2"></button>
                </div>

                <div class="carousel-inner">
                    <div class="carousel-item active">
                        <h3 class="panel-title">Livello Acqua Giornaliero</h3>
                        <iframe
                            src="http://localhost:3000/d-solo/1c1f173d-3be8-44f2-9260-d415bb383ba0/livello-acqua?orgId=1&from=1704063600000&to=1704668400000&timezone=browser&panelId=1&__feature.dashboardSceneSolo"
                            class="grafana-panel"
                            title="Grafico Livello Acqua Giornaliero">
                        </iframe>
                    </div>
                    <div class="carousel-item">
                        <h3 class="panel-title">Livello Acqua Settimanale</h3>
                        <iframe
                            src="http://localhost:3000/d-solo/1c1f173d-3be8-44f2-9260-d415bb383ba0/livello-acqua?orgId=1&from=1704063600000&to=1704668400000&timezone=browser&panelId=2&__feature.dashboardSceneSolo"
                            class="grafana-panel"
                            title="Grafico Livello Acqua Settimanale">
                        </iframe>
                    </div>
                    <div class="carousel-item">
                        <h3 class="panel-title">Livello Acqua Mensile</h3>
                        <iframe
                            src="http://localhost:3000/d-solo/1c1f173d-3be8-44f2-9260-d415bb383ba0/livello-acqua?orgId=1&from=1704063600000&to=1704668400000&timezone=browser&panelId=3&__feature.dashboardSceneSolo"
                            class="grafana-panel"
                            title="Grafico Livello Acqua Mensile">
                        </iframe>
                    </div>
                </div>

                <button class="carousel-control-prev" type="button" data-bs-target="#acquaCarousel" data-bs-slide="prev">
                    <span class="carousel-control-prev-icon"></span>
                    <span class="visually-hidden">Precedente</span>
                </button>
                <button class="carousel-control-next" type="button" data-bs-target="#acquaCarousel" data-bs-slide="next">
                    <span class="carousel-control-next-icon"></span>
                    <span class="visually-hidden">Successivo</span>
                </button>
            </div>
        </section>
    </div>

    
<!-- ------------------------------------------------- -->


    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Gestione della pompa
        let isPumpRunning = false;
        const startPumpBtn = document.getElementById('startPump');
        const stopPumpBtn = document.getElementById('stopPump');
        const statusIndicator = document.querySelector('.status-indicator');
        const statusValue = document.querySelector('.status-value');

        function updatePumpStatus(isRunning) {
            isPumpRunning = isRunning;
            statusIndicator.classList.toggle('active', isRunning);
            statusValue.textContent = isRunning ? 'Accesa' : 'Spenta';
            startPumpBtn.disabled = isRunning;
            stopPumpBtn.disabled = !isRunning;
        }

        startPumpBtn.addEventListener('click', () => {
            // Qui puoi aggiungere la chiamata API per avviare la pompa
            updatePumpStatus(true);
        });

        stopPumpBtn.addEventListener('click', () => {
            // Qui puoi aggiungere la chiamata API per fermare la pompa
            updatePumpStatus(false);
        });

        // Inizializza lo stato della pompa
        updatePumpStatus(false);
    </script>
</body>
</html>